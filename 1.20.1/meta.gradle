
String getConfig(String key) {
    return project.properties.get(key)
}

def mod_id = getConfig("mod_id")
def mod_version = getConfig("mod_version")
def mod_website_link = getConfig("mod_website_link")
def mod_issues_link = getConfig("mod_issues_link")
def mod_display_name = getConfig("mod_display_name")

processResources {
    // set up properties for filling into metadata
    var props = [
            "mod_version"     : mod_version,
            "mod_id"          : mod_id,
            "mod_issues_link" : mod_issues_link,
            "mod_website_link": mod_website_link,
            "mod_display_name": mod_display_name
    ]

for (final def key in project.properties.keySet()) {
    if (project.properties.get(key) instanceof String) {
        def value = project.properties.get(key);
        props.put(key, value);
    }
}
    inputs.properties(props)

    filesMatching("META-INF/mods.toml") {
        expand props
    }
}